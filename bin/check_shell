#!/bin/bash -i
set -eu

br_import 'print'

check_cmd() {
    command -v "$1" &> /dev/null && CMD_OK=1 || CMD_OK=0
}

check_shell() {
    check_commands=(
        "bazel"
        "g++"
        "clang++"
        "nvcc"
        "rsync"
        "git"
        "xclip"
        "docker"
        "ps"
        "htop"
        "watch"
        "ag"
        "grep"
        "clangd-15"
        "clangd"
        "pylsp"
    )

    for cmd in "${check_commands[@]}"; do
        check_cmd "$cmd"
        print_clr "$CLR_LIGHT_CYAN" "$cmd"

        if [[ CMD_OK -eq 1 ]]; then
            print_info "$COLOR_OUT is available!"
        else
            print_warn "$COLOR_OUT cannot be executed!"
        fi
    done

    print_clr "$CLR_LIGHT_CYAN" "$(whoami)"
    print_info "User $COLOR_OUT, shell ready."
}

check_shell

